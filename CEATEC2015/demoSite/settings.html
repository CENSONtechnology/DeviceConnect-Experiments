<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />

    <title>デモ設定</title>

    <link href="libs/bootstrap-3.3.5-dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/demo.css" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar navbar-inverse">
      <div class="container header-title">
          <h3>デモ設定</h3>
      </div>
    </nav>
    <nav class="navbar navbar-inverse header-menu">
      <div class="container">
        <ul class="nav navbar-nav">
          <li><a onclick="location.href='index.html'">戻る</a></li>
        </ul>
      </div>
    </nav>

    <div class="container" id="list-view">
    <br>
      <ul class="list-group">
        <li class="list-group-item" style="line-height:32px;">
          デバッグ機能 (静止画ズームボタン・ROI設定を表示)
          <div class="btn-group pull-right" role="group">
            <button id="debug-params-on" type="button" class="btn btn-default">ON</button>
            <button id="debug-params-off" type="button" class="btn btn-default">OFF</button>
          </div>
        </li>
        <li class="list-group-item" style="line-height:32px;">
          自動ループ再生機能
          <div class="btn-group pull-right" role="group">
            <button id="debug-autoplay-on" type="button" class="btn btn-default">ON</button>
            <button id="debug-autoplay-off" type="button" class="btn btn-default">OFF</button>
          </div>
        </li>
      </ul>
      <ul class="list-group">
        <li class="list-group-item" style="line-height:32px;">
          Device Connect Manager
          <button class="btn btn-default pull-right" onclick="location.href='assets/apk/dConnectDeviceTheta.apk'">インストール</button>
        </li>
        <li class="list-group-item" style="line-height:32px;">
          Theta デバイスプラグイン
          <button class="btn btn-default pull-right" onclick="location.href='assets/apk/dConnectManager.apk'">インストール</button>
        </li>
      </ul>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="libs/jquery-1.11.3.min.js"></script>
    <script src="libs/jquery.cookie-1.4.1.min.js"></script>
    <script src="libs/bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
    <script>
      var KEY_ENABLED_DEBUG_VIEW = 'enabled-debug-view';
      var KEY_ENABLED_DEBUG_AUTOPLAY = 'enabled-debug-autoplay';
      
      function Switch(arg) {
        this.isOn = arg.isOn;
        
        arg.on.on('click', function() { change(true) });
        arg.off.on('click', function() { change(false) });
        show(arg.isOn);
        
        function change(isOn) {
          if (this.isOn != isOn) {
            this.isOn = isOn;
            arg.onchange(isOn);
          }
          show(isOn);
        };
        
        function show(isOn) {
          if (isOn) {
            arg.on.addClass('btn-primary');
            arg.off.removeClass('btn-primary');
          } else {
            arg.on.removeClass('btn-primary');
            arg.off.addClass('btn-primary');
          }
        }
      };
      
      function init() {
        var isEnabledDebugView = loadBoolean(KEY_ENABLED_DEBUG_VIEW),
            isEnabledAutoPlay = loadBoolean(KEY_ENABLED_DEBUG_AUTOPLAY);
        console.log('Load Cookie: ' + KEY_ENABLED_DEBUG_VIEW + ' = ' + isEnabledDebugView);
        console.log('Load Cookie: ' + KEY_ENABLED_DEBUG_AUTOPLAY + ' = ' + isEnabledAutoPlay);

        new Switch({
          on: $('#debug-params-on'),
          off: $('#debug-params-off'),
          isOn: isEnabledDebugView,
          onchange: function(isOn) {
            $.cookie(KEY_ENABLED_DEBUG_VIEW, isOn.toString(), { path: '/' });
            console.log('Write Cookie: ' + KEY_ENABLED_DEBUG_VIEW + ' = ' + $.cookie(KEY_ENABLED_DEBUG_VIEW));
          }
        });
        new Switch({
          on: $('#debug-autoplay-on'),
          off: $('#debug-autoplay-off'),
          isOn: isEnabledAutoPlay,
          onchange: function(isOn) {
            $.cookie(KEY_ENABLED_DEBUG_AUTOPLAY, isOn.toString(), { path: '/' });
            console.log('Write Cookie: ' + KEY_ENABLED_DEBUG_AUTOPLAY + ' = ' + $.cookie(KEY_ENABLED_DEBUG_AUTOPLAY));
          }
        });
      }

      function loadBoolean(key) {
        var flag = $.cookie(key);
        if (flag === 'true' || flag === true) {
          return true;
        } else {
          return false;
        }
      }
      
      $(document).ready(function() {
        init();
      });
    </script>
  </body>
</html>